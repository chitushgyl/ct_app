<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>设置密码</title>
		<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		
		<!--标准mui.css-->
		<link rel="stylesheet" href="../css/mui.min.css">
		<!-- 通用样式 -->
		<link rel="stylesheet" type="text/css" href="../user/css/common.css"/>
		<!-- all safe -->
		<link rel="stylesheet" type="text/css" href="css/setPassword.css"/>
		<!-- fonticon -->
		<link rel="stylesheet" type="text/css" href="../fonts/iconfont.css"/>
	</head>
		<style type="text/css">
		.mui-bar{
			background-color: #FFFFFF;
		}
		.mui-title{
			color: #000000 !important;
			size: 18px !important;
		}
		.mui-margin{
			margin-bottom: 25px;
			background-color: red;
		}
		.mui-pull-left{
			color: #000000 !important;
		}
		.box{
			width: 100%;
			height: 70px;
		}
		.font{
			color: #2972E9;
		}
		/* #nextStep{
			width: 52px;
			height: 30px;
			position: absolute;
			top: -18px;
			right: 16px;
			background-color: #E3E7EB;
		} */
		.hasphone{
			background-color: #0088f4 !important;
		}
		.Eyes{
			position: absolute;
			right: 20px;
			top: 131px;
		}
		.Eyes2{
			position: absolute;
			right: 20px;
			top: 186px;
		}
		.Eyes3{
			position: absolute;
			right: 20px;
			top: 241px;
		}
		.box2{
			width: 25%;
			height: 44px;
			background: #FFFFFF;
			float: left;
			font-size: 16px;
			text-align: center;
			line-height: 44px;
			color: #1D2026;
		}
		.box3{
			width: 25%;
			height: 44px;
			background: #FFFFFF;
			float: left;
			font-size: 16px;
			text-align: center;
			line-height: 44px;
			color: #1D2026;
			padding-right: 16px;
		}
		.box4{
			width: 25%;
			height: 44px;
			background: #FFFFFF;
			float: left;
			font-size: 16px;
			text-align: center;
			line-height: 44px;
			color: #1D2026;
		}
		.mui-bar-nav {
			top: 0;
			-webkit-box-shadow:none;
			box-shadow:none;
		}
		</style>
	<body>
		<!-- 标题栏 -->
		<header class="mui-bar mui-bar-nav">
			<!-- <a class="mui-action-back mui-icon mui-icon-arrowleft font21 mui-pull-left" style="color: #000000;"></a> -->
			<a class="mui-action-back mui-pull-left">
				<img src="../images/user/topbackarr.png" style="width: 20px;">
			</a>
			<h1 class="mui-title"><span>设置登录密码</span></h1>
			<!-- <button type="button" class="mui-btn  mui-btn-block " style="line-height: 0; font-size: 18px;border:none;" id="nextStep" >保存</button> -->
		</header>
		<!-- 主内容 -->
		<div id="resetPassWord" class="mui-content" style="padding-top: 70px;">
			<div class="prompt"><font>温馨提示: 初次用短信登录的用户,初始密码为 123456</font></div>
			<div class=" ">
				<div id="" class="box2">
					原始密码
				</div>
				<input type="password" placeholder="请输入原始密码" class="mui-input-clear" id="repassword" style="height: 44px; width: 75%; border: none;color: #1D2026;">
				<span class="Eyes"><img style="display: none;" src="../images/login/white.png" width="20px" height="12px" id="ico" onclick="xs()" title="显示密码"/></span>
			</div>
			<div class="">
				<div id="" class="box3">
					新密码
				</div>
				<input type="password" placeholder="请输入新密码" class="mui-input-clear"id="password" style="height: 44px; width: 75%; border: none;color: #1D2026;">
				<span class="Eyes2"><img style="display: none;" src="../images/login/white.png" width="20px" height="12px" id="ico2" onclick="xss()" title="显示密码"/></span>
			</div>
			<div class="">
				<div id="" class="box4">
					确认密码
				</div>
				<input type="password" placeholder="请再输入新密码" class="mui-input-clear"id="second" style="height: 44px; width: 75%; border: none;color: #1D2026;">
				<span class="Eyes3"><img style="display: none;" src="../images/login/white.png" width="20px" height="12px" id="ico3" onclick="xxs()" title="显示密码"/></span>
			</div>

			<div style="padding-bottom:20px;padding-top:20px;">
				<button type="button" class="mui-btn mui-btn-block hasphone" style="height:44px;line-height: 44px;border-radius:22px;background-color: #0088f4;padding:0;" id="nextStep">保存</button>
			</div>
		</div>
		<script src="../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/base64.min.js" type="text/javascript"></script>
		<!-- mui 框架 -->
		<script src="../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/vue-2.4.1.js" type="text/javascript" charset="utf-8"></script>
		<!-- 通用js -->
		<!---->
		<script src="../js/config/request.js" type="text/javascript" charset="utf-8"></script>
		
		<script src="../js/controller/controller-account.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/common/common.js" type="text/javascript" charset="utf-8"></script>
		
		<script type="text/javascript">
			
			mui('body').on('tap','.hasphone',function(){
				
				var old_password = document.getElementById("repassword").value;
				var new_password = document.getElementById("password").value.trim();
				var confirm_password = document.getElementById("second").value.trim();
				// if(new_password){
				// 	mui.toast('密码不可为空格！');
				// 	return false;
				// }
				if(new_password.length<6){
					mui.toast('请输入至少6位数密码!');
					return false;
				}
			    // var token = user.getState('token');
			    var data={
					// token:token,
					password:old_password,
					new_pwd:new_password,
					com_pwd:confirm_password
				};
				console.log('密码：'+JSON.stringify(data));
				request.PostInfo_new(request.update_password,data,function(res){
					console.log(11111)
					console.log(res);
					mui.toast(res.msg);
					user.out(function(){
						plusCommon.popToTarget('../user/user.html',true);
					})
				},function(response){});

			})
			
			document.getElementById('second').addEventListener('input',function(){  // 确认密码
				if(this.value){
					
					var old_password = document.getElementById("repassword").value;
					var new_password = document.getElementById("password").value.trim();
					var confirm_password = document.getElementById("second").value;
					
					document.getElementById("ico3").style.display="block";
					document.getElementById("ico").style.display="none";
					document.getElementById("ico2").style.display="none";
					document.getElementById("ico3").src="../images/login/noeye.png";
					document.getElementById("ico2").src="../images/login/white.png";
					document.getElementById("ico").src="../images/login/white.png";
					if(new_password && old_password){
						document.getElementById('nextStep').classList.add('hasphone');
					}
//					document.getElementById("clear").src="../../images/irregular_icon/clear.png";
				}else{
					document.getElementById('nextStep').classList.remove('hasphone');
					document.getElementById("ico3").style.display="none";
//					document.getElementById("clear").src="../../images/irregular_icon/white.png";
					document.getElementById("ico3").src="../images/login/white.png";
				}
			});
			
			document.getElementById('repassword').addEventListener('input',function(){  // 当前密码
				if(this.value){
					
					var old_password = document.getElementById("repassword").value;
					var new_password = document.getElementById("password").value.trim();
					var confirm_password = document.getElementById("second").value;
					
					document.getElementById("ico").style.display="block";
					document.getElementById("ico2").style.display="none";
					document.getElementById("ico3").style.display="none";
					document.getElementById("ico").src="../images/login/noeye.png";
					document.getElementById("ico2").src="../images/login/white.png";
					document.getElementById("ico3").src="../images/login/white.png";
					if(new_password && confirm_password){
						document.getElementById('nextStep').classList.add('hasphone');
					}
				}else{
					document.getElementById('nextStep').classList.remove('hasphone');
					document.getElementById("ico").style.display="none";
					document.getElementById("ico").src="../images/login/white.png";
				}
			});
			
			document.getElementById('password').addEventListener('input',function(){    // 新密码
				if(this.value){
					
					var old_password = document.getElementById("repassword").value;
					var new_password = document.getElementById("password").value.trim();
					var confirm_password = document.getElementById("second").value;
					
					document.getElementById("ico2").style.display="block";
					document.getElementById("ico").style.display="none";
					document.getElementById("ico3").style.display="none";
					document.getElementById("ico2").src="../images/login/noeye.png";
					document.getElementById("ico").src="../images/login/white.png";
					document.getElementById("ico3").src="../images/login/white.png";
					if(new_password && confirm_password){
						document.getElementById('nextStep').classList.add('hasphone');
					}
				}else{
					document.getElementById('nextStep').classList.remove('hasphone');
					document.getElementById("ico2").src="../images/login/white.png";
					document.getElementById("ico2").style.display="none";
				}
			});
			document.getElementById('repassword').addEventListener('focus',function(){
				if(this.value){
					document.getElementById("ico").style.display="block";
					document.getElementById("ico2").style.display="none";
					document.getElementById("ico3").style.display="none";
					document.getElementById("ico").src="../images/login/noeye.png";
					document.getElementById("ico2").src="../images/login/white.png";
					document.getElementById("ico3").src="../images/login/white.png";
				}
				document.getElementById("ico2").style.display="none";
				document.getElementById("ico3").style.display="none";
				document.getElementById("ico2").src="../images/login/white.png";
				document.getElementById("ico3").src="../images/login/white.png";
			})
			document.getElementById('second').addEventListener('focus',function(){
				if(this.value){
					document.getElementById("ico3").style.display="block";
					document.getElementById("ico").style.display="none";
					document.getElementById("ico2").style.display="none";
					document.getElementById("ico3").src="../images/login/noeye.png";
					document.getElementById("ico").src="../images/login/white.png";
					document.getElementById("ico2").src="../images/login/white.png";
				}
				document.getElementById("ico").style.display="none";
				document.getElementById("ico2").style.display="none";
				document.getElementById("ico").src="../images/login/white.png";
				document.getElementById("ico2").src="../images/login/white.png";
			})
			document.getElementById('password').addEventListener('focus',function(){ 
				if(this.value){
					document.getElementById("ico2").style.display="block";
					document.getElementById("ico").style.display="none";
					document.getElementById("ico3").style.display="none";
					document.getElementById("ico2").src="../images/login/noeye.png";
					document.getElementById("ico").src="../images/login/white.png";
					document.getElementById("ico3").src="../images/login/white.png";
				}
				document.getElementById("ico").style.display="none";
				document.getElementById("ico3").style.display="none";
				document.getElementById("ico").src="../images/login/white.png";
				document.getElementById("ico3").src="../images/login/white.png";
			})
			function xs(){
	        	//var a = document.getElementById("inp").value;
		        var title=document.getElementById("ico").title;
		        //alert();
		        if(title == "隐藏密码"){
		            document.getElementById("repassword").type="password";
		            document.getElementById("ico").title = "显示密码";
					document.getElementById("ico").src="../images/login/noeye.png";
		        }else{
		            document.getElementById("ico").title = "隐藏密码";
		            document.getElementById("repassword").type="text"; 
					document.getElementById("ico").src="../images/login/eyes.png";
		        }     
	        }
			function xss(){
	        	//var a = document.getElementById("inp").value;
		        var title=document.getElementById("ico2").title;
		        //alert();
		        if(title == "隐藏密码"){
		            document.getElementById("password").type="password";
		            document.getElementById("ico2").title = "显示密码";
					document.getElementById("ico2").src="../images/login/noeye.png";
		        }else{
		            document.getElementById("ico2").title = "隐藏密码";
		            document.getElementById("password").type="text"; 
					document.getElementById("ico2").src="../images/login/eyes.png";
		        }     
	        }
			function xxs(){
	        	//var a = document.getElementById("inp").value;
		        var title=document.getElementById("ico3").title;
		        //alert();
		        if(title == "隐藏密码"){
		            document.getElementById("second").type="password";
		            document.getElementById("ico3").title = "显示密码";
					document.getElementById("ico3").src="../images/login/noeye.png";
		        }else{
		            document.getElementById("ico3").title = "隐藏密码";
		            document.getElementById("second").type="text"; 
					document.getElementById("ico3").src="../images/login/eyes.png";
		        }     
	        }
	        setAutoHeight(function(h){
				$('.mui-content').css({"margin-top":(h-20)+"px"});
				// $('#nextStep').css({"top":(h)+"px"});
			},2)
		</script>
	</body>
</html>